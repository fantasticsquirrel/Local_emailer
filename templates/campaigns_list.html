{% extends "base.html" %}
{% block content %}
<h1>Campaigns</h1>
<p><a href="{{ url_for('campaign_new') }}">New Campaign</a></p>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Schedule Type</th>
      <th>Active</th>
      <th>Last Run</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for c in campaigns %}
      <tr>
        <td>{{ c.id }}</td>
        <td>{{ c.name }}</td>
        <td>{{ c.schedule_type }}</td>
        <td>{{ "Yes" if c.active else "No" }}</td>
        <td>{{ c.last_run_at }}</td>
        <td>
          <a href="{{ url_for('campaign_edit', campaign_id=c.id) }}">Edit</a>
          {% if c.active %}
            <form method="post" action="{{ url_for('campaign_deactivate', campaign_id=c.id) }}" style="display:inline">
              <button type="submit">Deactivate</button>
            </form>
          {% else %}
            <form method="post" action="{{ url_for('campaign_activate', campaign_id=c.id) }}" style="display:inline">
              <button type="submit">Activate</button>
            </form>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
